<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See harness/README in the NetBeans platform -->
<!-- for some information on what you could do (e.g. targets to override). -->
<!-- If you delete this file and reopen the project it will be recreated. -->
<project name="marauroa.lib" default="netbeans" basedir=".">
    <description>Builds, tests, and runs the project marauroa.lib.</description>
    <import file="nbproject/build-impl.xml"/>
    <import file="${suite.dir}/build.xml"/>
    
    <target name="init" depends="init-netbeans, init-hudson, harness.init">
        <if>
            <and>
                <available file="../../../Marauroa NB/nbbuild.xml" type="file" />
                <isset property="src.src.dir"/>
            </and>
            <then>
                <property file="../../../Marauroa NB/nbproject/project.properties" prefix="marauroa-lib"/>
                <!--Copy the Marauroa Related files-->
                <ant antfile="../../../Marauroa NB/nbbuild.xml" target="jar" inheritall="false" />
                <copy file="../../../Marauroa NB/${marauroa-lib.dist.jar}" tofile="release/modules/ext/Marauroa.jar"/>
                <copy file="../../../Marauroa NB/${marauroa-lib.file.reference.log4j.jar}" tofile="release/modules/ext/log4j.jar"/>
            </then>
        </if>
        <if>
            <and>
                <available file="../../Simple-Server/build.xml" type="file" />
                <isset property="src.src.dir"/>
            </and>
            <then>
                <property file="../../Simple-Server/nbproject/project.properties" prefix="server-lib"/>
                <!--Copy the Marauroa Related files-->
                <ant antfile="../../Simple-Server/build.xml" target="jar" inheritall="false" />
                <copy file="../${server-lib.file.reference.marauroa.jar}" tofile="release/modules/ext/Marauroa.jar"/>
                <copy file="../${server-lib.file.reference.log4j.jar}" tofile="release/modules/ext/log4j.jar"/>
            </then>
        </if>
        <if>
            <and>
                <available file="../../Marauroa Monitor Extension/build.xml" type="file" />
                <isset property="src.src.dir"/>
            </and>
            <then>
                <property file="../../Marauroa Monitor Extension/nbproject/project.properties" prefix="monitor-lib"/>
                <length string="${monitor-lib.dist.dir}" property="length.dist" />
                <math result="length.dist" operand1="1" operation="+" operand2="${length.dist}" datatype="int"/>
                <length string="${monitor-lib.dist.jar}" property="length.dist.jar" />
                <substring text="${monitor-lib.dist.jar}" start="${length.dist}" end="${length.dist.jar}" property="monitor-lib.dist.jar" />
                <ant antfile="../../Marauroa Monitor Extension/build.xml" target="jar" inheritall="false" />
                <copy file="../../Marauroa Monitor Extension/dist/${monitor-lib.dist.jar}" tofile="release/modules/ext/${monitor-lib.dist.jar}"/>
            </then>
        </if>
    </target>
</project>
